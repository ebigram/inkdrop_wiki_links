{"version":3,"sources":["../src/index.js"],"names":["module","exports","originalAnchorComponent","activate","markdownRenderer","remarkPlugins","push","wikiLinkPlugin","inkdrop","isMobile","setWikiLinkComponent","deactivate","filter","plugin","WikiLink","unsetWikiLinkComponent","OriginalAnchor","remarkReactComponents","a"],"mappings":";;AAAA;;AAEA;;AACA;;;;AAFA;AAIA;AAEAA,MAAM,CAACC,OAAP,GAAiB;AACbC,EAAAA,uBAAuB,EAAE,IADZ;;AAEbC,EAAAA,QAAQ,GAAG;AACP;AACA;AACA,QAAIC,yBAAJ,EAAsB;AAClB;AACAA,gCAAiBC,aAAjB,CAA+BC,IAA/B,CAAoCC,yBAApC,EAFkB,CAGlB;;;AACA,OAACC,OAAO,CAACC,QAAT,IAAqB,KAAKC,oBAAL,EAArB;AACH;AACJ,GAXY;;AAabC,EAAAA,UAAU,GAAG;AACT,QAAIP,yBAAJ,EAAsB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACAA,gCAAiBC,aAAjB,GAAiCD,0BAAiBC,aAAjB,CAA+BO,MAA/B,CAC5BC,MAAD,IAAYA,MAAM,KAAKC,QADM,CAAjC;AAGA,OAACN,OAAO,CAACC,QAAT,IAAqB,KAAKM,sBAAL,EAArB,CAXkB,CAYlB;AACA;AACA;AACH;AACJ,GA9BY;;AA+BbL,EAAAA,oBAAoB,GAAG;AACnB,UAAMM,cAAc,GAAGZ,0BAAiBa,qBAAjB,CAAuCC,CAA9D;AACA,UAAMJ,QAAQ,GAAG,wBAAqBE,cAArB,CAAjB;AACAZ,8BAAiBa,qBAAjB,CAAuCC,CAAvC,GAA2CJ,QAA3C;AACA,SAAKZ,uBAAL,GAA+Bc,cAA/B;AACH,GApCY;;AAsCbD,EAAAA,sBAAsB,GAAG;AACrBX,8BAAiBa,qBAAjB,CAAuCC,CAAvC,GAA2C,KAAKhB,uBAAhD;AACH;;AAxCY,CAAjB","sourcesContent":["import { markdownRenderer } from \"inkdrop\";\n// import wiki_link from \"./remark_wiki\";\nimport createRemarkWikiLink from \"./wiki_link\";\nimport wikiLinkPlugin from \"./wiki_link_plugin\";\n\n// wikiLinkPlugin.hrefTemplate = (permalink) => `command://core:find/${permalink}`;\n\nmodule.exports = {\n    originalAnchorComponent: null,\n    activate() {\n        // debugger;\n        // console.log(wikiLinkPlugin);\n        if (markdownRenderer) {\n            // markdownRenderer.remarkPlugins.push(wiki_link);\n            markdownRenderer.remarkPlugins.push(wikiLinkPlugin);\n            // markdownRenderer.remarkReactComponents.wiki_link = WikiLink;\n            !inkdrop.isMobile && this.setWikiLinkComponent();\n        }\n    },\n\n    deactivate() {\n        if (markdownRenderer) {\n            // const { remarkPlugins, remarkReactComponents } = markdownRenderer;\n            // const { remarkPlugins } = markdownRenderer;\n            // const i = remarkPlugins.indexOf(wiki_link);\n            // const i = remarkPlugins.indexOf(wikiLinkPlugin);\n            // if (i >= 0) {\n            // remarkPlugins.splice(i, 1);\n            // }\n            markdownRenderer.remarkPlugins = markdownRenderer.remarkPlugins.filter(\n                (plugin) => plugin !== WikiLink\n            );\n            !inkdrop.isMobile && this.unsetWikiLinkComponent();\n            // if (remarkReactComponents.wiki_link === WikiLink) {\n            //     delete remarkReactComponents.wiki_link;\n            // }\n        }\n    },\n    setWikiLinkComponent() {\n        const OriginalAnchor = markdownRenderer.remarkReactComponents.a;\n        const WikiLink = createRemarkWikiLink(OriginalAnchor);\n        markdownRenderer.remarkReactComponents.a = WikiLink;\n        this.originalAnchorComponent = OriginalAnchor;\n    },\n\n    unsetWikiLinkComponent() {\n        markdownRenderer.remarkReactComponents.a = this.originalAnchorComponent;\n    },\n};\n"],"file":"index.js"}