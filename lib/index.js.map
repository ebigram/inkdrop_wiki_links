{"version":3,"sources":["../src/index.js"],"names":["module","exports","originalAnchorComponent","activate","markdownRenderer","remarkPlugins","push","wikiLinkPlugin","inkdrop","isMobile","setWikiLinkComponent","deactivate","filter","plugin","WikiLink","unsetWikiLinkComponent","OriginalAnchor","remarkReactComponents","a"],"mappings":";;AAAA;;AACA;;AACA;;;;AAEA;AAEAA,MAAM,CAACC,OAAP,GAAiB;AACbC,EAAAA,uBAAuB,EAAE,IADZ;;AAEbC,EAAAA,QAAQ,GAAG;AACP,QAAIC,yBAAJ,EAAsB;AAClBA,gCAAiBC,aAAjB,CAA+BC,IAA/B,CAAoCC,yBAApC;;AACA,UAAI,CAACC,OAAO,CAACC,QAAb,EAAuB;AACnB,aAAKC,oBAAL;AACH;AACJ;AACJ,GATY;;AAWbC,EAAAA,UAAU,GAAG;AACT,QAAIP,yBAAJ,EAAsB;AAClBA,gCAAiBC,aAAjB,GAAiCD,0BAAiBC,aAAjB,CAA+BO,MAA/B,CAC5BC,MAAD,IAAYA,MAAM,KAAKC,QADM,CAAjC;;AAGA,UAAI,CAACN,OAAO,CAACC,QAAb,EAAuB;AACnB,aAAKM,sBAAL;AACH;AACJ;AACJ,GApBY;;AAqBbL,EAAAA,oBAAoB,GAAG;AACnB,UAAMM,cAAc,GAAGZ,0BAAiBa,qBAAjB,CAAuCC,CAA9D;AACA,UAAMJ,QAAQ,GAAG,wBAAqBE,cAArB,CAAjB;AACAZ,8BAAiBa,qBAAjB,CAAuCC,CAAvC,GAA2CJ,QAA3C;AACA,SAAKZ,uBAAL,GAA+Bc,cAA/B;AACH,GA1BY;;AA4BbD,EAAAA,sBAAsB,GAAG;AACrBX,8BAAiBa,qBAAjB,CAAuCC,CAAvC,GAA2C,KAAKhB,uBAAhD;AACH;;AA9BY,CAAjB","sourcesContent":["import { markdownRenderer } from \"inkdrop\";\nimport createRemarkWikiLink from \"./wiki_link\";\nimport wikiLinkPlugin from \"./wiki_link_plugin\";\n\n// wikiLinkPlugin.hrefTemplate = (permalink) => `command://core:find/${permalink}`;\n\nmodule.exports = {\n    originalAnchorComponent: null,\n    activate() {\n        if (markdownRenderer) {\n            markdownRenderer.remarkPlugins.push(wikiLinkPlugin);\n            if (!inkdrop.isMobile) {\n                this.setWikiLinkComponent();\n            }\n        }\n    },\n\n    deactivate() {\n        if (markdownRenderer) {\n            markdownRenderer.remarkPlugins = markdownRenderer.remarkPlugins.filter(\n                (plugin) => plugin !== WikiLink\n            );\n            if (!inkdrop.isMobile) {\n                this.unsetWikiLinkComponent();\n            }\n        }\n    },\n    setWikiLinkComponent() {\n        const OriginalAnchor = markdownRenderer.remarkReactComponents.a;\n        const WikiLink = createRemarkWikiLink(OriginalAnchor);\n        markdownRenderer.remarkReactComponents.a = WikiLink;\n        this.originalAnchorComponent = OriginalAnchor;\n    },\n\n    unsetWikiLinkComponent() {\n        markdownRenderer.remarkReactComponents.a = this.originalAnchorComponent;\n    },\n};\n"],"file":"index.js"}