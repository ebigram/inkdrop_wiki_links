{"version":3,"sources":["../src/index.js"],"names":["module","exports","originalSpanComponent","setWikiLinkComponent","OriginalSpan","markdownRenderer","remarkReactComponents","span","WikiLink","unsetWikiLinkComponent","activate","remarkPlugins","push","wikiLinkPlugin","inkdrop","isMobile","deactivate","filter","plugin"],"mappings":";;AAAA;;AACA;;AACA;;;;AAEAA,MAAM,CAACC,OAAP,GAAiB;AACbC,EAAAA,qBAAqB,EAAE,IADV;;AAEbC,EAAAA,oBAAoB,GAAG;AACnB,UAAMC,YAAY,GAAGC,0BAAiBC,qBAAjB,CAAuCC,IAA5D;AACA,UAAMC,QAAQ,GAAG,wBAAqBJ,YAArB,CAAjB;AACAC,8BAAiBC,qBAAjB,CAAuCC,IAAvC,GAA8CC,QAA9C;AACA,SAAKN,qBAAL,GAA6BE,YAA7B;AACH,GAPY;;AASbK,EAAAA,sBAAsB,GAAG;AACrBJ,8BAAiBC,qBAAjB,CAAuCC,IAAvC,GAA8C,KAAKL,qBAAnD;AACH,GAXY;;AAYbQ,EAAAA,QAAQ,GAAG;AACP,QAAIL,yBAAJ,EAAsB;AAClBA,gCAAiBM,aAAjB,CAA+BC,IAA/B,CAAoCC,yBAApC,EADkB,CAElB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;;AACA,UAAI,CAACC,OAAO,CAACC,QAAb,EAAuB;AACnB,aAAKZ,oBAAL;AACH;AACJ;AACJ,GA7BY;;AA+Bba,EAAAA,UAAU,GAAG;AACT,QAAIX,yBAAJ,EAAsB;AAClBA,gCAAiBM,aAAjB,GAAiCN,0BAAiBM,aAAjB,CAA+BM,MAA/B,CAC5BC,MAAD,IAAYA,MAAM,KAAKL,yBADM,CAAjC,CADkB,CAIlB;AACA;AACA;;AACA,UAAI,CAACC,OAAO,CAACC,QAAb,EAAuB;AACnB,aAAKN,sBAAL;AACH;AACJ;AACJ;;AA3CY,CAAjB","sourcesContent":["import { markdownRenderer } from \"inkdrop\";\nimport createRemarkWikiLink from \"./wiki_link\";\nimport wikiLinkPlugin from \"./wiki_link_plugin\";\n\nmodule.exports = {\n    originalSpanComponent: null,\n    setWikiLinkComponent() {\n        const OriginalSpan = markdownRenderer.remarkReactComponents.span;\n        const WikiLink = createRemarkWikiLink(OriginalSpan);\n        markdownRenderer.remarkReactComponents.span = WikiLink;\n        this.originalSpanComponent = OriginalSpan;\n    },\n\n    unsetWikiLinkComponent() {\n        markdownRenderer.remarkReactComponents.span = this.originalSpanComponent;\n    },\n    activate() {\n        if (markdownRenderer) {\n            markdownRenderer.remarkPlugins.push(wikiLinkPlugin);\n            // markdownRenderer.remarkReactComponents.wikiLink = WikiLink;\n            // Array.from(document.querySelectorAll(\".wiki_link\")).forEach(\n            //     (wiki_link_node) => {\n            //         wiki_link_node.addEventListener(\"click\", (event) => {\n            //             console.log(event);\n            //             console.log(event.target.textContent);\n            //         });\n            //     }\n            // );\n            debugger;\n            if (!inkdrop.isMobile) {\n                this.setWikiLinkComponent();\n            }\n        }\n    },\n\n    deactivate() {\n        if (markdownRenderer) {\n            markdownRenderer.remarkPlugins = markdownRenderer.remarkPlugins.filter(\n                (plugin) => plugin !== wikiLinkPlugin\n            );\n            // if (remarkReactComponents.wikiLink === WikiLink) {\n            // delete remarkReactComponents.wikiLink;\n            // }\n            if (!inkdrop.isMobile) {\n                this.unsetWikiLinkComponent();\n            }\n        }\n    },\n};\n"],"file":"index.js"}